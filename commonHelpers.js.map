{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst APIKey = '42006022-41a20d969efbb704c546dcbcd';\n\nexport class PhotoApi {\n    static BASE_URL = \"https://pixabay.com\";\n    static END_POINT = \"/api\";\n\n    constructor(){\n        this.query = '';\n        this.page = 1;\n        this.pageSize = 16;\n        this.totalResults = 0;\n    }\n\n    async getPhotos(searchValue = this.query) {\n        if (searchValue) this.query = searchValue;   \n        const params = new URLSearchParams({\n            key: APIKey,\n            q: this.query,\n            image_type:  'photo',\n            orientation : 'horizontal',\n            page: this.page,\n            per_page: this.pageSize,\n        });\n\n        const url = `${PhotoApi.BASE_URL}${PhotoApi.END_POINT}?${params}`;\n\n        const response = await axios(url);\n\n        return response.data\n    }\n}","function galleryTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL}>\n        <img src=${webformatURL} alt=\"${tags}\" /></a>\n        <ul class=\"image-desc\">\n            <li class=\"image-desc-item\"><p>Likes</p><p>${likes}</p></li>\n            <li class=\"image-desc-item\"><p>Views</p><p>${views}</p></li>\n            <li class=\"image-desc-item\"><p>Comments</p><p>${comments}</p></li>\n            <li class=\"image-desc-item\"><p>Downloads</p><p>${downloads}</p></li>\n        </ul>\n    </li>`;  \n}\n  \nexport function gallerysTemplate(searchResult) {\n    return searchResult.map(galleryTemplate).join('');\n}","import { PhotoApi } from './js/pixabay-api';\nimport { gallerysTemplate } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n    form: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loadingIndicator: document.querySelector('.loader'),\n    loadBtn: document.querySelector('.load-btn')\n};\n\nconst photoApi = new PhotoApi();\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadBtn.addEventListener('click', onLoadMoreClick)\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n\n    const searchValue = e.target.elements.search.value\n    if (searchValue.trim() === '') {\n        iziToast.show({\n            message: 'Please enter a search term!',\n            position: 'topRight',\n            timeout: 3000,\n        });\n        return;\n    }\n\n    refs.gallery.innerHTML = '';\n    photoApi.page = 1;\n    showLoader();\n\n    photoApi.getPhotos(searchValue).then(res=> {\n        refs.gallery.innerHTML = '';\n        if (res.hits.length === 0) {\n            hideLoader();\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                timeout: 3000,\n            });\n\n        } else {\n            hideLoader();\n            const markup = gallerysTemplate(res.hits);\n            refs.gallery.innerHTML = markup;\n            photoApi.totalResults = res.totalHits;\n            changeBtnState();\n            lightbox.refresh()\n        }\n    } )\n    \n}\n\nasync function onLoadMoreClick() {\n    photoApi.page += 1;\n    showLoader();\n\n    try {\n        const result = await photoApi.getPhotos();\n        const markup = gallerysTemplate(result.hits);\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n        changeBtnState();\n        smoothScroll();\n    } catch (error) {\n        console.error('Error loading more photos:', error);\n        iziToast.error({\n            message: 'Failed to load more images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction changeBtnState() {\n    if (photoApi.page * photoApi.pageSize >= photoApi.totalResults) {\n        hideLoadBtn();\n    } else {\n        showLoadBtn();\n    }\n}\n\nfunction smoothScroll() {\n    const firstCard = document.querySelector('.gallery-item');\n    if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\nfunction showLoader() {\n    refs.loadingIndicator.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    refs.loadingIndicator.classList.add('hidden');\n}\n\nfunction showLoadBtn() {\n    refs.loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n    refs.loadBtn.classList.add('hidden');\n}\n\nconst lightbox = new SimpleLightbox('.gallery-item a', { \n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\n"],"names":["APIKey","_PhotoApi","searchValue","params","url","axios","__publicField","PhotoApi","galleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallerysTemplate","searchResult","refs","photoApi","onFormSubmit","onLoadMoreClick","e","iziToast","showLoader","res","hideLoader","markup","changeBtnState","lightbox","result","smoothScroll","error","hideLoadBtn","showLoadBtn","firstCard","cardHeight","SimpleLightbox"],"mappings":"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"}